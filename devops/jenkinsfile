pipeline {
  agent { 
    // this image provides everything needed to run Cypress
    docker {
      image 'cypress/base:10'
    }
  }
    environment {
        CYPRESS_CACHE_FOLDER ='/home/jenkins/.cache/Cypress/8.6.0/Cypress/Cypress'
        CYPRESS_CACHE_FOLDER=./tmp/Cypress npm install

    }
    stages {
        stage('e2e Tests') {
            steps {
               sh 'docker build --no-cache -t cypress-tests .'
            }
        }
    }
}